<!doctype html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title>Document</title>
<style>
ul,li {margin: 0;padding:0; list-style: none;}
#pagesNav ul,#pagesNav li {display: inline; padding:0 5px;}
#pagesNav2 ul,#pagesNav2 li {display: inline; padding:0 5px;}
.f_L {float: left;}
.exp_ul  {
        overflow: hidden;
        *zoom:1;
}
.exp_ul li {
        overflow: hidden;
        padding: 5px 10px;
}
.exp_ul p  {
        margin:0;
        overflow: hidden;
        *zoom:1;
        display: block;
        width: 100px;
}
.exp_ul div {
        overflow: hidden;
        *zoom:1;
}
.cur {
        border:1px solid #f90;
        color: red;
}
</style>
</head>
<body>
        <ul class="exp_ul" id="pages" style="height:250px">
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面1</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面2</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面3</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面4</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面5</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面6</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面7</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面8</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面9</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面10</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面11</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面12</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面13</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面14</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面15</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面16</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面17</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面18</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面19</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面20</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面21</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面22</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面23</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面24</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面25</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面26</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面27</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面28</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面29</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面30</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面31</div>
                </li>
        </ul>
        <div id="pagesNav">
                <span id="pageP">prev</span>
                <ul id="pagesA">
                </ul>
                <span id="pageN">next</span>
        </div>
		
        <ul class="exp_ul" id="pages2" style="height:250px">
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面1</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面2</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面3</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面4</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面5</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面6</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面7</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面8</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面9</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面10</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面11</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面12</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面13</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面14</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面15</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面16</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面17</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面18</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面19</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面20</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面21</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面22</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面23</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面24</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面25</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面26</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面27</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面28</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面29</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面30</div>
                </li>
                <li>
                        <p class="f_L">2013-03-18</p>
                        <div>页面31</div>
                </li>
        </ul>
        <div id="pagesNav2">
                <span id="pageP2">prev</span>
                <ul id="pagesA2">
                </ul>
                <span id="pageN2">next</span>
        </div>		
		
</body>
<script>
window.onload=function()
{
	nextPage
	({
		pagesMain:"pages",
		pagesNav:"pagesA",
		curNum:8,
		pages:"pages",
		activeClass:"cur",
		ini:"0",//初始化显示第几页 0为第一页
		prevBtn:"pageP2",
		nextBtn:"pageN2"
	});
	
	nextPage
	({
		pagesMain:"pages2",
		pagesNav:"pagesA2",
		curNum:8,
		pages:"pages2",
		activeClass:"cur",
		ini:"0",//初始化显示第几页 0为第一页
		prevBtn:"pageP2",
		nextBtn:"pageN2"
	})	
	
	function nextPage(nextPage)
	{
		var pages=document.getElementById(nextPage.pagesMain);//分页内容
		var pagesNav=document.getElementById(nextPage.pagesNav);//分页数
		var prev=document.getElementById(nextPage.prevBtn);//上一页
		var next=document.getElementById(nextPage.nextBtn);//下一页
		var curNum=nextPage.curNum;//当前页
		var leng=Math.ceil(pages.children.length/curNum); //页数
		var pageList="";//自动生成页码 数组
		var num=0;//当前的index
		//自动生成页码li
		for(var i=0;i<leng;i++)
		{
			pageList+="\<li\>"+parseInt(i+1)+"\<\/li\>";
		};
		//给ul加上 页码
		pagesNav.innerHTML=pageList;
		//默认第一页 给第一页页码加上高亮
		pagesNav.children[0].className=nextPage.activeClass;

		//给点击页码加上 高亮class 返回index
		for(var i=0;i<pagesNav.children.length;i++)
		{
			pagesNav.children[i].index=i;
			pagesNav.children[i].onclick=function()
			{
				for(var i=0;i<pagesNav.children.length;i++)
				{
					pagesNav.children[i].className="";                                
				}
				this.className=nextPage.activeClass;
				num=this.index;
				ini(num)// 传入当前页的index 用ini方法显示点击到的组
			}
		}
		
		//上一页
		prev.onclick=function()
		{
			if (num==0)
				return false;
			else
			{
				console.log(num)
				for(var i=0;i<pagesNav.children.length;i++)
					pagesNav.children[i].className="";                                
				pagesNav.children[num-1].className=nextPage.activeClass;
				ini(num-1)
				return num--;
			}
		}
		
		//下一页
		next.onclick=function()
		{
			if (num==leng-1) 
				return false;
			else
			{
				console.log(leng)
				for(var i=0;i<pagesNav.children.length;i++)
					pagesNav.children[i].className="";                                
				pagesNav.children[num+1].className=nextPage.activeClass;
				ini(num+1)
				return num++;
			}
		}
		
		//初始化显示第一页内容 隐藏后面
		function ini(iniBum)
		{
			var iniBum=iniBum;
			for(var j=0;j<leng;j++)
			{
				for(var i=0;i<curNum;i++)
				{
					if(pages.children[(j*curNum)+i]==undefined)
						continue;
					pages.children[(j*curNum)+i].style.display="none";
				}
			}
			for(var i=0;i<curNum;i++)
			{
				if(pages.children[(iniBum*curNum)+i]==undefined)
					continue;
				pages.children[(iniBum*curNum)+i].style.display="block";
			}
		}
		
		//初始化显示第一页内容 隐藏后面	
		ini(nextPage.ini)
	}
}
</script>
</html>